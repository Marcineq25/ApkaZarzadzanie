<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥j Bud≈ºet Osobisty</title>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/style.css">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c3e50">
    <link rel="apple-touch-icon" href="icon-512.png">
</head>

<body>

    <button id="mobile-menu-btn">‚ò∞</button>
    <div id="overlay" class="ukryty"></div>

    <div class="app-layout">

        <nav class="sidebar">
            <div class="logo">üí∞Bud≈ºet</div>
            <ul class="menu">
                <li class="aktywna" id="menu-pulpit">
                    <span class="ikona">üè†</span> Pulpit
                </li>
                <li id="menu-analiza">
                    <span class="ikona">üìà</span> Analiza
                </li>
                <li id="menu-zadania">
                    <span class="ikona">üéØ</span> Cele i Zadania
                </li>
                <li id="menu-ustawienia">
                    <span class="ikona">‚öôÔ∏è</span> Ustawienia
                </li>
            </ul>
        </nav>

        <main class="main-content">

            <header class="top-bar" id="glowny-naglowek">
                <h1 id="tytul-strony">Pulpit finansowy</h1>

                <div class="okres-nawigacja">
                    <div class="okres-wrapper" style="display: flex; gap: 10px; align-items: center;">
                        <input type="month" id="filtr-data">
                        <select id="filtr-rok-select" class="ukryty"></select>
                        <label
                            style="font-size: 12px; display: flex; align-items: center; cursor: pointer; white-space: nowrap;">
                            <input type="checkbox" id="filtr-rok" style="width: auto; margin-right: 5px;">
                            Ca≈Çy rok
                        </label>
                    </div>
                </div>
            </header>

            <section id="widok-pulpit" class="widok">
                <div class="grid-layout">

                    <aside class="panel-lewy">
                        <div class="karta">
                            <h3>Nowa transakcja</h3>
                            <form id="formularz">
                                <div class="form-row">
                                    <div class="input-group">
                                        <label>Data</label>
                                        <input type="date" id="data" required>
                                    </div>
                                    <div class="input-group">
                                        <label>Kwota</label>
                                        <input type="number" id="kwota" placeholder="0.00" step="0.01" required>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label>Opis</label>
                                    <input type="text" id="tekst" placeholder="np. Zakupy" required>
                                </div>
                                <div class="form-row">
                                    <div class="input-group">
                                        <label>Typ</label>
                                        <select id="typ">
                                            <option value="wydatek">Wydatek</option>
                                            <option value="przychod">Przych√≥d</option>
                                        </select>
                                    </div>
                                    <div class="input-group">
                                        <label>Kategoria</label>
                                        <select id="kategoria"></select>
                                    </div>
                                </div>
                                <button type="submit" id="btn-submit">Dodaj</button>
                            </form>
                        </div>

                        <div class="karta" style="flex: 0;">
                            <h3>Podsumowanie okresu</h3>
                            <div class="mini-raport">
                                <div class="raport-linia przychod">
                                    <span>Przychody</span>
                                    <strong id="suma-przychodow">0.00 z≈Ç</strong>
                                </div>
                                <div class="raport-linia wydatek">
                                    <span>Wydatki</span>
                                    <strong id="suma-wydatkow">0.00 z≈Ç</strong>
                                </div>
                            </div>
                        </div>
                    </aside>

                    <div class="panel-prawy">
                        <div class="karta bilans-karta">
                            <h2 id="tytul-salda">Saldo w tym miesiƒÖcu:</h2>
                            <div id="stan-konta" class="wielka-liczba">0.00 z≈Ç</div>
                        </div>

                        <div class="filtry" id="kontener-filtrow">
                            <input type="text" id="szukaj-transakcji" placeholder="Szukaj w historii...">

                            <div class="filtry-grupa">
                                <select id="filtr-typ">
                                    <option value="wszystkie">Wszystkie typy</option>
                                    <option value="wydatek">Tylko wydatki</option>
                                    <option value="przychod">Tylko przychody</option>
                                </select>

                                <select id="sortuj-wedlug">
                                    <option value="data-nowe">Data: Najnowsze</option>
                                    <option value="data-stare">Data: Najstarsze</option>
                                    <option value="kwota-wysoka">Kwota: Najwy≈ºsza</option>
                                    <option value="kwota-niska">Kwota: Najni≈ºsza</option>
                                </select>
                            </div>
                        </div>

                        <div class="karta karta-lista">
                            <h3>Historia operacji</h3>
                            <div class="scroll-wrapper">
                                <ul id="lista"></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="widok-zadania" class="widok ukryty">
                <div class="karta">
                    <h3>Dodaj nowe zadanie</h3>
                    <form id="formularz-zadan"
                        style="display: flex; gap: 10px; flex-wrap: wrap; align-items: flex-end;">
                        <div style="flex: 3; min-width: 200px;">
                            <input type="text" id="zadanie-tresc" placeholder="Co masz do zrobienia?"
                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;"
                                required>
                        </div>

                        <div style="flex: 1; min-width: 130px;">
                            <input type="date" id="zadanie-data"
                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;"
                                required>
                        </div>

                        <div style="flex: 1; min-width: 120px;">
                            <select id="zadanie-typ"
                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                                <option value="dzienne">üìÖ Dzi≈õ/Dzie≈Ñ</option>
                                <option value="tygodniowe">üóìÔ∏è Tydzie≈Ñ</option>
                                <option value="miesieczne">üìÜ MiesiƒÖc</option>
                                <option value="roczne">üèÜ Rok</option>
                            </select>
                        </div>

                        <button type="submit"
                            style="flex: 0 0 100px; padding: 10px; background-color: #27ae60; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">Dodaj</button>
                    </form>
                </div>

                <div class="grid-zadania"
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; flex: 1; overflow: hidden; min-height: 0;">

                    <div class="karta kolumna-zadania" id="col-dzienne"
                        style="display: flex; flex-direction: column; border-top: 4px solid #3498db; height: 100%; margin-bottom: 0;">

                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 8px;">
                            <button id="btn-prev-day"
                                style="background:none; border:none; cursor:pointer; font-size: 16px;">‚óÄ</button>
                            <div style="text-align: center;">
                                <h3 style="color: #3498db; margin: 0; font-size: 14px;">DZIENNE</h3>
                                <span id="naglowek-data-dzienne"
                                    style="font-size: 11px; color: #666; font-weight: bold;">Dzi≈õ</span>
                            </div>
                            <button id="btn-next-day"
                                style="background:none; border:none; cursor:pointer; font-size: 16px;">‚ñ∂</button>
                        </div>

                        <div class="scroll-wrapper" style="flex: 1; overflow-y: auto;">
                            <ul id="lista-zadan-dzienne" class="lista-prosta" style="list-style: none; padding: 0;">
                            </ul>
                        </div>

                        <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                            <div
                                style="font-size: 11px; color: #666; margin-bottom: 3px; display: flex; justify-content: space-between;">
                                <span>Postƒôp:</span>
                                <span id="progress-text-dzienne" style="font-weight: bold;">0/0</span>
                            </div>
                            <div
                                style="width: 100%; height: 6px; background: #eee; border-radius: 3px; overflow: hidden;">
                                <div id="progress-fill-dzienne"
                                    style="width: 0%; height: 100%; background: #3498db; transition: width 0.3s;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="karta"
                        style="display: flex; flex-direction: column; border-top: 4px solid #9b59b6; height: 100%; margin-bottom: 0;">
                        <h3 style="color: #9b59b6; margin-bottom: 10px; font-size: 14px;">üóìÔ∏è TYGODNIOWE (Taktyczne)
                        </h3>
                        <div class="scroll-wrapper" style="flex: 1; overflow-y: auto;">
                            <ul id="lista-zadan-tygodniowe" class="lista-prosta" style="list-style: none; padding: 0;">
                            </ul>
                        </div>
                    </div>

                    <div class="karta"
                        style="display: flex; flex-direction: column; border-top: 4px solid #e67e22; height: 100%; margin-bottom: 0;">
                        <h3 style="color: #e67e22; margin-bottom: 10px; font-size: 14px;">üìÜ MIESIƒòCZNE (Etapy)</h3>
                        <div class="scroll-wrapper" style="flex: 1; overflow-y: auto;">
                            <ul id="lista-zadan-miesieczne" class="lista-prosta" style="list-style: none; padding: 0;">
                            </ul>
                        </div>
                    </div>

                    <div class="karta"
                        style="display: flex; flex-direction: column; border-top: 4px solid #f1c40f; height: 100%; margin-bottom: 0;">
                        <h3 style="color: #f39c12; margin-bottom: 10px; font-size: 14px;">üèÜ ROCZNE (Strategia)</h3>
                        <div class="scroll-wrapper" style="flex: 1; overflow-y: auto;">
                            <ul id="lista-zadan-roczne" class="lista-prosta" style="list-style: none; padding: 0;"></ul>
                        </div>
                    </div>
                </div>
            </section>

            <section id="widok-analiza" class="widok ukryty">
                <div class="grid-analiza">
                    <div class="karta">
                        <div class="naglowek-wykresu">
                            <h3>Struktura: <span id="tytul-wykresu">Wydatki</span></h3>
                            <div class="przelacznik-wykresu">
                                <button id="btn-pokaz-wydatki" class="aktywny">Wydatki</button>
                                <button id="btn-pokaz-przychody">Przychody</button>
                            </div>
                        </div>
                        <div class="wrapper-wykresu">
                            <canvas id="mojWykres"></canvas>
                        </div>
                    </div>

                    <div class="karta">
                        <h3>Trend salda (Przep≈Çyw got√≥wki)</h3>
                        <div class="wrapper-wykresu">
                            <canvas id="wykresLiniowy"></canvas>
                        </div>
                    </div>

                    <div class="karta">
                        <h3>Bilans: Przychody vs Wydatki</h3>
                        <div class="wrapper-wykresu">
                            <canvas id="wykresSlupkowy"></canvas>
                        </div>
                    </div>

                    <div class="karta">
                        <div class="naglowek-wykresu">
                            <h3>Ranking: <span id="tytul-rankingu">Wydatki</span></h3>
                            <div class="przelacznik-wykresu">
                                <button id="btn-ranking-wydatki" class="aktywny">Wydatki</button>
                                <button id="btn-ranking-przychody">Przychody</button>
                            </div>
                        </div>
                        <div class="wrapper-wykresu">
                            <canvas id="wykresRanking"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <section id="widok-ustawienia" class="widok ukryty">
                <div class="ustawienia-container">
                    <div class="karta">
                        <h3>Kopia zapasowa danych</h3>
                        <p style="font-size: 13px; color: #666; margin-bottom: 15px;">
                            Pobierz swoje dane do pliku JSON.
                        </p>
                        <div class="form-row">
                            <button id="btn-eksport" style="background-color: #27ae60;">üíæ Pobierz (Backup)</button>
                            <input type="file" id="input-import" accept=".json" style="display: none;">
                            <button id="btn-import-trigger" style="background-color: #e67e22;">üìÇ Wgraj z pliku</button>
                        </div>
                    </div>

                    <div class="karta">
                        <h3>Konfiguracja Widoku Zada≈Ñ</h3>
                        <p style="font-size: 12px; color: #666; margin-bottom: 10px;">Wybierz, kt√≥re kolumny chcesz
                            widzieƒá:</p>

                        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="checkbox" id="check-col-tygodniowe" checked
                                    style="width: auto; margin-right: 8px;">
                                <span>Tygodniowe</span>
                            </label>
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="checkbox" id="check-col-miesieczne" checked
                                    style="width: auto; margin-right: 8px;">
                                <span>Miesiƒôczne</span>
                            </label>
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="checkbox" id="check-col-roczne" checked
                                    style="width: auto; margin-right: 8px;">
                                <span>Roczne</span>
                            </label>
                        </div>
                    </div>
                    <div class="karta">
                        <h3>ZarzƒÖdzanie Kategoriami</h3>
                        <div class="dodaj-kategorie-wrapper">
                            <input type="text" id="nowa-kategoria-input" placeholder="Nazwa nowej kategorii..."
                                style="flex: 2;">
                            <select id="nowa-kategoria-typ" style="flex: 1;">
                                <option value="wydatek">Wydatek</option>
                                <option value="przychod">Przych√≥d</option>
                            </select>
                            <button id="btn-dodaj-kategorie">Dodaj</button>
                        </div>

                        <div class="kolumny-kategorii">
                            <div class="kolumna">
                                <h4>Wydatki</h4>
                                <ul id="lista-kategorii-wydatki" class="lista-ustawienia"></ul>
                            </div>
                            <div class="kolumna">
                                <h4>Przychody</h4>
                                <ul id="lista-kategorii-przychody" class="lista-ustawienia"></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="js/app.js"></script>
</body>

</html>